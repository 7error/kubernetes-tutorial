clone:
  git:
    image: plugins/git
    depth: 50
    tags: true

pipeline:
  backend:
     image: golang
     commands:
       - go build
       - go test
  frontend:
     image: node
     commands:
       - npm install
       - npm run test
       - npm run build
  deploy:
    image: quay.io/honestbee/drone-kubernetes
    kubernetes_server: http://rancher.test.sunmi.cn:8080
    kubernetes_token: CXHVLJSDKJFS...
    namespace: app
    deployment: my-deployment
    repo: myorg/myrepo
    container: my-container
    tag: mytag